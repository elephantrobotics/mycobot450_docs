# 小案例

我们来写一个小案例，通过这个案例来介绍`blockly`的基础使用

**案例描述：**控制机械臂回零，然后控制一关节移动到20度的位置，然后再回到零位。

**第一步：**首先点击`姿态`按钮，打开姿态视图，在这里可以看到仿真机械臂的当前姿态。

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/posture-btn.png" />

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/posture.png" />

- 1：切换姿态面板：当姿态面板隐藏时点击显示，反之点击收起。
- 2：机械臂仿真模型，可根据当前真实角度实时仿真运动。

**第二步：**开始编程

打开工具箱一级分类`运动控制`，选择二级分类`角度&坐标`，拖动`设置全角度`积木块到工作区。

此积木块用于控制机械臂各关节运动到给定的角度，运动速度默认20。

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case1.png" />

打开工具箱一级分类`基础编程`，选择二级分类`时间`，拖动`睡眠`积木块到工作区，并设置睡眠时间为3秒。

睡眠时间3秒的意思是：程序等待3秒钟后往下执行。为什么要等待3秒钟呢？因为组要确保机械臂先把第一个指令动作先完成后再执行后续其他动作。

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case2.png" />

复制`设置全角度`积木块并修改`关节1`角度为20：

- 鼠标点击选中工作区中`设置全角度`积木块；
- 按住键盘Ctrl + C复制`设置全角度`积木块；
- 按住键盘Ctrl + V粘贴`设置全角度`积木块；
- 将新积木块`关节1`修改为20；
- 拖动该积木块使其与`睡眠`积木块连接；

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case3.png" />

同上操作类似，复制`睡眠`积木块，并设置睡眠时间为 `3` 秒；

再次复制工作区第一个`设置全角度`积木块；

完整代码如下：

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case4.png" />

> 这段代码的意思是：
>
> - 控制机械臂回到零点<br />
> - 等待3秒钟（等待机器回零点完成）<br />
> - 使一关节（J1）移动到20度的位置<br />
> - 等待3秒钟<br />
> - 控制机械臂回到零点<br />

最后，点击`运行面板`按钮，打开面板后，点击`运行`按钮开始执行代码。

代码运行完成，点击面板`X` 可关闭面板

**第三步：**保存 和 加载 文件（或者说保存加载工作区）

`blockly` 支持 工作区的保存和加载。

点击`文件`按钮，出现一个下拉菜单，点击其中的`保存`按钮，会显示文件命名模态窗，输入自命名并点击确认即可保存，保存结果会在左下角以消息提示的形式展示。

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case7.png" />

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case10.png" />

**第四步：** 新建工作区 操作（这个操作会清空工作区所有代码）

点击`文件`按钮，出现一个下拉菜单，点击其中的`新建工作区`按钮，会出现提示，点击`确认`按钮

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case8.png" />

新建工作区完成

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case9.png" />

**第五步：**加载工作区 操作，加载我们之前保存的工作区文件。

点击`文件`按钮，出现一个下拉菜单，点击菜单中 `打开文件` 按钮后，会展示已保存文件列表，选择需要加载的工作区文件并点击打开按钮即可实现加载，点击删除按钮可将该文件删除。

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case11.png" />

加载完成

<img src="../../../../resources/3-FunctionsAndApplications/5.myBlockly/blockly/case4.png" />

[← 上一页](./5.5.2-interfaceDescription.md) |[下一页 →](./5.5.4-autofill.md)

